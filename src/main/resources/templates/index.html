<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <style>
        #display {
            border: 1px solid black;
            width: max-content;
            padding: 0.5rem;
            height: 200px; /* Set a fixed height for the box */
            overflow-y: auto; /* Enable vertical scrolling if content exceeds box height */
        }
    </style>
</head>
<body>

<ol>
    <li th:each="el : ${movieList}">
        <a th:href="'https://www.themoviedb.org/movie/' + ${el.id()}"
           th:text="${el.title()} + ' Rating: ' + ${el.vote_average()}"></a>
    </li>
</ol>

<ol>
    <li th:each="el : ${movieList}" th:text="${el.title()}"></li>
</ol>

<form id="comment-section" method="post" th:action="@{/add-comment}">
    <label for="comment">Comment: </label>
    <textarea id="comment" th:name="comment" required maxlength="140" autocomplete="off"></textarea>
    <label for="author">Author: </label>
    <input id="author" type="text" th:name="author" required maxlength="20" autocomplete="off">
    <button>Send</button>
</form>

<div id="APIs">
    <form id="allAuthors" method="get" th:action="@{/comments/all}" target="_blank">
        <button>All comments</button>
    </form>

    <form id="todayPosts" method="get" target="_blank" th:action="@{/comments/today}">
        <button>Show posts from today</button>
    </form>

    <form id="oneAuthorForm" method="get" target="_blank">
        <label for="commentAuthor">Author:</label>
        <input type="text" id="commentAuthor" autocomplete="off"/>
        <button onclick="submitByAuthorForm()">Submit</button>
    </form>

    <form id="byIdForm" method="get" target="_blank">
        <label for="commentId">ID:</label>
        <input type="text" id="commentId" min="1" autocomplete="off"/>
        <button onclick="submitByIdForm()">ID submit</button>
    </form>
</div>

<script th:inline="javascript">
    function submitByAuthorForm() {

        event.preventDefault();

        var commentAuthorValue = document.getElementById('commentAuthor').value;

        if (commentAuthorValue.trim() === "") {
            alert("Please enter a value for the author.");
            return false;
        }

        document.getElementById('oneAuthorForm').action = '/comments/users/' + commentAuthorValue;

        document.getElementById('oneAuthorForm').submit();

        document.getElementById('commentAuthor').value = '';

    }

    function submitByIdForm() {
        event.preventDefault();

        var commentIdValue = document.getElementById('commentId').value;

        var isValidInput = /^[1-9]\d*$/.test(commentIdValue)

        if (!isValidInput) {
            alert("Please enter valid ID (whole positive number higher than 0).");
            return false;
        }

        document.getElementById('byIdForm').action = '/comments/' + commentIdValue;

        document.getElementById('byIdForm').submit();

        document.getElementById('commentId').value = '';

    }

</script>

</body>
</html>